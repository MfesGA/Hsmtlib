\haddockmoduleheading{Cmd.Solver}
\label{module:Cmd.Solver}
\haddockbeginheader
{\haddockverb\begin{verbatim}
module Cmd.Solver (
    Sexp,  Error,  Result,  Solvers(Z3, Cvc4),  Mode(Online, Context, Script), 
    SolverConfig(Config, path, args),  CtResult(CtxRes, context, result), 
    Solver(Solver,
           CtSolver,
           setLogic,
           setOption,
           setInfo,
           declareType,
           defineType,
           declareFun,
           defineFun,
           push,
           pop,
           assert,
           checkSat,
           getAssertions,
           getValue,
           getProof,
           getUnsatCore,
           getInfo,
           getOption,
           exit,
           setLogicCt,
           setOptionCt,
           setInfoCt,
           declareTypeCt,
           defineTypeCt,
           declareFunCt,
           defineFunCt,
           pushCt,
           popCt,
           assertCt,
           checkSatCt,
           getAssertionsCt,
           getValueCt,
           getProofCt,
           getUnsatCoreCt,
           getInfoCt,
           getOptionCt,
           exitCt), 
    (|*|),  (|#|),  (|$|)
  ) where\end{verbatim}}
\haddockendheader

This module has most types,data and functions that a user might need to
  utilize the library.
\par

\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
type\ Sexp\ =\ String
\end{tabular}]\haddockbegindoc
Placeholder type that later on will be changed to a more complex type.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
type\ Error\ =\ String
\end{tabular}]\haddockbegindoc
Placeholder type that later on will be changed to a more complex type.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
type\ Result\ =\ String
\end{tabular}]\haddockbegindoc
Placeholder type that later on will be changed to a more complex type.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
data\ Solvers
\end{tabular}]\haddockbegindoc
\haddockbeginconstrs
\haddockdecltt{=} & \haddockdecltt{Z3} & \\
\haddockdecltt{|} & \haddockdecltt{Cvc4} & \\
\end{tabulary}\par
Sovler's that are currently supported.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
data\ Mode
\end{tabular}]\haddockbegindoc
\haddockbeginconstrs
\haddockdecltt{=} & \haddockdecltt{Online} & \\
\haddockdecltt{|} & \haddockdecltt{Context} & \\
\haddockdecltt{|} & \haddockdecltt{Script} & \\
\end{tabulary}\par
Avaliable modes to use a solver.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
data\ SolverConfig
\end{tabular}]\haddockbegindoc
\haddockbeginconstrs
\haddockdecltt{=} & \haddockdecltt{Config} & \\
                    \haddockdecltt{path :: String} &
                    \haddockdecltt{args :: [String]} &
\end{tabulary}\par
Alternative configuration of a solver which can be passed in the function
  startSolver in \haddocktt{Main}
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
data\ CtResult
\end{tabular}]\haddockbegindoc
\haddockbeginconstrs
\haddockdecltt{=} & \haddockdecltt{CtxRes} & \\
                    \haddockdecltt{context :: [String]} & List with all the commands.

                    \haddockdecltt{result :: Result} & Result of the last command.

\end{tabulary}\par
The alternative Result given by a solver using the context Mode.
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
instance\ Show\ CtResult
\end{tabular}]
\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
data\ Solver
\end{tabular}]\haddockbegindoc
\haddockbeginconstrs
\haddockdecltt{=} & \haddockdecltt{Solver} & \\
                    \haddockdecltt{setLogic :: Name -> IO Result} &
                    \haddockdecltt{setOption :: Option -> IO Result} &
                    \haddockdecltt{setInfo :: Attr -> IO Result} &
                    \haddockdecltt{declareType :: Name
                                                  -> Integer -> IO Result} &
                    \haddockdecltt{defineType :: Name
                                                 -> [Name]
                                                    -> Type -> IO Result} &
                    \haddockdecltt{declareFun :: Name
                                                 -> [Type]
                                                    -> Type -> IO Result} &
                    \haddockdecltt{defineFun :: Name
                                                -> [Binder]
                                                   -> Type
                                                      -> Expr -> IO Result} &
                    \haddockdecltt{push :: Integer -> IO Result} &
                    \haddockdecltt{pop :: Integer -> IO Result} &
                    \haddockdecltt{assert :: Expr -> IO Result} &
                    \haddockdecltt{checkSat :: IO Result} &
                    \haddockdecltt{getAssertions :: IO Result} &
                    \haddockdecltt{getValue :: [Expr] -> IO Result} &
                    \haddockdecltt{getProof :: IO Result} &
                    \haddockdecltt{getUnsatCore :: IO Result} &
                    \haddockdecltt{getInfo :: InfoFlag -> IO Result} &
                    \haddockdecltt{getOption :: Name -> IO Result} &
                    \haddockdecltt{exit :: IO Result} &
\haddockdecltt{|} & \haddockdecltt{CtSolver} & \\
                    \haddockdecltt{setLogicCt :: Name
                                                 -> IO CtResult
                                                    -> IO CtResult} &
                    \haddockdecltt{setOptionCt :: Option
                                                  -> IO CtResult
                                                     -> IO CtResult} &
                    \haddockdecltt{setInfoCt :: Attr
                                                -> IO CtResult -> IO CtResult} &
                    \haddockdecltt{declareTypeCt :: Name
                                                    -> Integer
                                                       -> IO CtResult
                                                          -> IO CtResult} &
                    \haddockdecltt{defineTypeCt :: Name
                                                   -> [Name]
                                                      -> Type
                                                         -> IO CtResult
                                                            -> IO CtResult} &
                    \haddockdecltt{declareFunCt :: Name
                                                   -> [Type]
                                                      -> Type
                                                         -> IO CtResult
                                                            -> IO CtResult} &
                    \haddockdecltt{defineFunCt :: Name
                                                  -> [Binder]
                                                     -> Type
                                                        -> Expr
                                                           -> IO CtResult
                                                              -> IO CtResult} &
                    \haddockdecltt{pushCt :: Integer
                                             -> IO CtResult -> IO CtResult} &
                    \haddockdecltt{popCt :: Integer
                                            -> IO CtResult -> IO CtResult} &
                    \haddockdecltt{assertCt :: Expr
                                               -> IO CtResult -> IO CtResult} &
                    \haddockdecltt{checkSatCt :: IO CtResult -> IO CtResult} &
                    \haddockdecltt{getAssertionsCt :: IO CtResult
                                                      -> IO CtResult} &
                    \haddockdecltt{getValueCt :: [Expr]
                                                 -> IO CtResult
                                                    -> IO CtResult} &
                    \haddockdecltt{getProofCt :: IO CtResult -> IO CtResult} &
                    \haddockdecltt{getUnsatCoreCt :: IO CtResult
                                                     -> IO CtResult} &
                    \haddockdecltt{getInfoCt :: InfoFlag
                                                -> IO CtResult -> IO CtResult} &
                    \haddockdecltt{getOptionCt :: Name
                                                  -> IO CtResult
                                                     -> IO CtResult} &
                    \haddockdecltt{exitCt :: IO CtResult -> IO CtResult} &
\end{tabulary}\par
Solver data type that has all the functions.
 There exists two Constructors Solver and CtSolver, Solver is used for Online
 and Script mode. CtSolver is only used in ContextMode.
\par
The types of both are similar the only diferenc is that in CtSolver we need
 too keep the list of all commands used, so each commands needs to receive
 the list of the last command.
\par
To facilitate this there existis some combinators further bellow,
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[\begin{tabular}{@{}l}
(|*|)\ ::\ (IO\ CtResult\ ->\ IO\ CtResult)\\\ \ \ \ \ \ \ \ \ ->\ (IO\ CtResult\ ->\ IO\ CtResult)\ ->\ IO\ CtResult
\end{tabular}]\haddockbegindoc
The following combinators are used in context mode to write cleaner code.
\par
The combinator |*| should be used only after the first command and  |{\char '44}|  before the last command.
\par
The other, |{\char '43}| should be used in between.
\par
e.g:
\haddocktt{\\main\ ::\ IO\ ()\\main\ =\ do\\\ \ solver\ <-\ startSolver\ Cvc4\ Slv.Context\ \haddocktt{QF_LIA}\ \ Nothing\ Nothing\\\ \ declareFunCt\ solver\ (N\ \haddocktt{a})\ {\char 91}{\char 93}\ tInt\ |*|\\\ \ declareFunCt\ solver\ (N\ \haddocktt{x})\ {\char 91}{\char 93}\ tInt\ |{\char '43}|\\\ \ declareFunCt\ solver\ (N\ \haddocktt{y})\ {\char 91}{\char 93}\ tInt\ |{\char '43}|\\\ \ checkSatCt\ solver\ |{\char '44}|\\\ \ exitCt\ solver\\}
\par

\end{haddockdesc}
\begin{haddockdesc}
\item[
(|{\char '43}|)\ ::\ IO\ CtResult\ ->\ (IO\ CtResult\ ->\ IO\ CtResult)\ ->\ IO\ CtResult
]
\item[
(|{\char '44}|)\ ::\ IO\ CtResult\ ->\ (IO\ CtResult\ ->\ IO\ CtResult)\ ->\ IO\ ()
]
\end{haddockdesc}